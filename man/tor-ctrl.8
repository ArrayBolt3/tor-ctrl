.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "tor-ctrl" "8" "September 2069" "Interact with Tor\[aq]s controller via command line tool" ""
.hy
.SH NAME
.PP
tor-ctrl(8) - Interact with Tor\[aq]s controller via command line tool
.SH SYNOPSIS
.PP
\f[B]tor-ctrl\f[R] [\f[B]-wq\f[R]] [\f[B]-s\f[R] \f[I]socket\f[R]]
[\f[B]-p\f[R] \f[I]pwd\f[R]] [\f[B]-t\f[R] \f[I]time\f[R]]
[[\f[B]-c\f[R]] \f[I]\[dq]command\[dq]\f[R]] [[\f[B]--\f[R]]
\f[I]command\f[R]]
.SH DESCRIPTION
.PP
\f[B]tor-ctrl\f[R] is a commandline tool for executing commands on a tor
server via the controlport.
In order to get this to work, add define the socket that will control
the tor process, can be a tcp socket \f[I]ControlPort 9051\f[R] or a
unix domain socket \f[I]ControlSocket /path/to/socket\f[R].
To secure the controller, you must setup and authentication method,
which can be a cookie \f[I]CookieAuthentication 1\f[R] or if you want a
fixed password, hash a password with \f[I]echo
\[dq]HashedControlPassword $(tor --hash-password yourpassword)\[dq]\f[R]
and use the same output given.
These configuration lines must be inserted to your torrc and tor
reloaded after making changes.
.SH OPTIONS
.TP
[\f[B]--\f[R]] [\f[I]command\f[R]]
command to execute.
Must be after all options.
Don\[aq]t need to be quoted and preferably signal end of option parsing
with \[aq]--\[aq].
.TP
\f[B]-c\f[R] [\f[I]\[dq]command\[dq]\f[R]]
command to execute.
Always \[dq]quote\[dq] your command.
The \f[I]-c\f[R] is optional if the command is the last positional
argument.
.TP
\f[B]-s\f[R] [\f[I]socket\f[R]]
Tor\[aq]s control socket.
Accept \f[I]tcp socket\f[R] in the format
[\f[I]addr:\f[R]]\f[I]port\f[R] (examples: 9051, 127.0.0.1:9051).
Accept \f[I]unix domain socket\f[R] in the following format
[\f[I]unix:\f[R]]\f[I]path\f[R] (examples: /run/tor/control,
unix:/run/tor/control).
(Default: 9051).
.TP
\f[B]-p\f[R] [\f[I]pwd\f[R]]
Use password instead of tor\[aq]s cookie.
(Default: not used).
.TP
\f[B]-t\f[R] [\f[I]time\f[R]]
sleep [var] seconds after each command sent.
(Default for socat/nc: 0 second, Default for telnet: 1 second).
.TP
\f[B]-w\f[R]
Wait for confirmation with an enter pressed to end the connection after
sending the command.
Usefult when you want to be warned about events, example is when the
command is \f[I]SETEVENTS STREAM\f[R] (Default: not set)
.TP
\f[B]-q\f[R]
Quiet mode.
(Default: not set).
.SH EXIT CODES
.TP
\f[B]0\f[R]
Fail
.TP
\f[B]>0\f[R]
Success.
.SH EXAMPLES
.PP
tor-ctrl -q -- SETCONF bandwidthrate=1mb
.PP
tor-ctrl \[dq]GETINFO version\[dq]
.PP
tor-ctrl -s 9051 -p foobar -- GETCONF bandwidthrate
.PP
For setting the bandwidth for specific times of the day, I suggest
calling tor-ctrl via cron, e.g.:
.PP
\f[C]0 22 * * * /path/to/tor-ctrl -c \[dq]SETCONF bandwidthrate=1mb\[dq]\f[R]
.PP
\f[C]0 7 * * *  /path/to/tor-ctrl -c \[dq]SETCONF bandwidthrate=100kb\[dq]\f[R]
.PP
This would set the bandwidth to 100kb at 07:00 and to 1mb at 22:00.
You can use notations like 1mb, 1kb or the number of bytes.
.SH WWW
.PP
https://gitweb.torproject.org/torspec.git/tree/control-spec.txt
.SH DISCLAIMER
.PP
This package is produced independently of, and carries no guarantee
from, The Tor Project.
.SH LICENSE
.PP
Copyright (c) 2007 by Stefan Behte Portion Copyright (C) 2013 - 2020
ENCRYPTED SUPPORT LP <adrelanos@riseup.net> Portion Copyright (C) 2021 -
2022 nyxnor <nyxnor@protonmail.com>
.PP
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the
Free Software Foundation, either version 3 of the License, or (at your
option) any later version.
.PP
This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
See the GNU General Public License for more details.
.PP
You should have received a copy of the GNU General Public License along
with this program.
If not, see <https://www.gnu.org/licenses/>.
.PP
On Debian systems, the full text of the GNU General Public License
version 3 can be found in the file
\[ga]/usr/share/common-licenses/GPL-3\[aq].
.SH AUTHORS
tor-ctrl was written by Stefan Behte (stefan.behte\[at]gmx.net), later
developed by and Patrick Schleizer (adrelanos\[at]riseup.net) and futher
improved by nyxnor (nyxnor\[at]protonmail.com).
